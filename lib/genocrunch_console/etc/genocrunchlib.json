{
"choices":{
  "statistics":[
    {"value":"anova", "label":"ANOVA"},
    {"value":"ttest", "label":"t-test"},
    {"value":"ttest_paired", "label":"Paired t-test"},
    {"value":"kruskal", "label":"Kruskal-Wallis rank sum test"},
    {"value":"friedman", "label":"Friedman test"},
    {"value":"wilcox", "label":"Wilcoxon rank sum test"},
    {"value":"wilcox_paired", "label":"Wilcoxon signed rank test"}
  ],
  "binning":[
    {"value":"sum", "label":"Sum values within categories"},
    {"value":"mean", "label":"Average values within categories"}
  ],
  "transformation":[
    {"value":"none", "label":"No transformation"},
    {"value":"log2cpm", "label":"log2 of count per million"},
    {"value":"log2", "label":"Log2"},
    {"value":"percent", "label":"Percent"}
  ],
  "batch_effect":[
    {"value":"none", "label":"None"},
    {"value":"combat", "label":"ComBat"}
  ],
  "diversity":[
    {"value":"richness", "label":"Richness", "pkg":""},
    {"value":"shannon", "label":"Shannon Diversity Index", "pkg":"vegan"},
    {"value":"simpson", "label":"Simpson Diversity Index", "pkg":"vegan"},
    {"value":"invsimpson", "label":"inverse Simpson Diversity Index", "pkg":"vegan"},
    {"value":"Gini", "label":"Gini coefficient", "pkg":"ineq"},
    {"value":"chao1", "label":"chao1 estimator", "pkg":"fossil"},
    {"value":"RS", "label":"Ricci-Schutz coefficient", "pkg":"ineq"},
    {"value":"Atkinson", "label":"Atkinson measure", "pkg":"ineq"},
    {"value":"Theil", "label":"Theil entropy measure", "pkg":"ineq"},
    {"value":"Kolm", "label":"Kolm measure", "pkg":"ineq"},
    {"value":"var", "label":"Coefficient of variation", "pkg":"ineq"}
  ],
  "correlation":[
    {"value":"spearman", "label":"Spearman Correlation Coefficient", "pkg":""},
    {"value":"pearson", "label":"Pearson Correlation Coefficient", "pkg":""}
  ],
  "distance":[
    {"value":"jaccard", "label":"Jaccard Index", "pkg":"vegan"},
    {"value":"bray", "label":"Bray-Curtis Distance", "pkg":"vegan"},
    {"value":"euclidean", "label":"Euclidean Distance", "pkg":"vegan"},
    {"value":"manhattan", "label":"Manhattan Distance", "pkg":"vegan"},
    {"value":"spearman", "label":"Spearman Correlation Coefficient", "pkg":""},
    {"value":"pearson", "label":"Pearson Correlation Coefficient", "pkg":""},
    {"value":"canberra", "label":"Canberra Distance", "pkg":"vegan"},
    {"value":"kulczynski", "label":"Kulczynski Similarity Measure", "pkg":"vegan"},
    {"value":"gower", "label":"Gower Similarity Coefficient", "pkg":"vegan"},
    {"value":"morisita", "label":"Morisita Overlap Index", "pkg":"vegan"},
    {"value":"horn", "label":"Horn-Morisita Index", "pkg":"vegan"},
    {"value":"mountford", "label":"Mountford Index", "pkg":"vegan"},
    {"value":"raup", "label":"Raup-Crick dissimilarity", "pkg":"vegan"},
    {"value":"binomial", "label":"Binomial distance", "pkg":"vegan"},
    {"value":"chao", "label":"Chao Index", "pkg":"vegan"}
  ],
  "clustering":[
    {"value":"pam",
     "label":"k-medoids algorithm",
     "pkg":"fpc"},
    {"value":"pam-bray",
     "label":"k-medoids algorithm run on Bray-Curtis dissimilarity",
     "pkg":"fpc"},
    {"value":"pam-jaccard",
     "label":"k-medoids algorithm run on Jaccard distance",
     "pkg":"fpc"},
    {"value":"kmeans",
     "label":"k-means algorithm",
     "pkg":"fpc"}
  ],
  "graph_clustering":[
    {"value":"none", "label":"", "pkg":""},
    {"value":"walktrap", "label":"Short random walks algorithm", "pkg":"igraph"},
    {"value":"fastgreedy", "label":"Greedy optimization of modularity algorithm", "pkg":"igraph"},
    {"value":"louvain", "label":"Multi-level optimization of modularity algorithm", "pkg":"igraph"},
    {"value":"labelpropagation", "label":"Label propagation method of Raghavan et al.", "pkg":"igraph"}
  ]
},
"fields":{
  "Inputs":[
  {"id":"name",
   "scope":"form_only",
   "help":"This will be the name of the new job. Choose something relevent and avoid special characters. Ex: Exp01_Seq01.",
   "type":"text",
   "optional":false,
   "placeholder":"New job name"
  },
 {"id":"description",
   "scope":"form_only",
   "help":"This will be the description of the new job. Give enough details for your analysis to be understood by someone else (if you want to share).",
   "type":"textarea",
   "optional":true,
   "placeholder":"Some details"
  },
  {"id":"primary_dataset",
   "help":"Data file. Format must be tab-delimited text with one column per sample and one row per OTU/gene. Last column must be 'taxonomy' and contain ';'-delimited categories. No row or column names duplicate are allowed. First row must include samples names. Comments can be included at the beginning of the file and start with '#'. [<a href='/home/doc#primary_dataset_format' target='_blank'>File format</a>]",
   "type":"file",
   "optional":false
  },
  {"id":"category_column",
   "help":"This must be the name of the column in your input file that contains the category (i.e. taxonomy, pathways, etc.). The selected column will be used in categorical binning.",
   "type":"select",
   "placeholder":"Select Primary dataset first",
   "increment":"3",
   "optional":true
  },
  {"id":"map",
   "help":"Mapping file. It describes the experimental design. Columns represent factors (ex: treatment,sex,etc.) and rows indicates samples. Format must be tab-delimited text. First row must contain column names. At least one column must contain the sample names,matching the first row of data file (Input). [<a href='/home/doc#map_format' target='_blank'>File format</a>]",
   "type":"file",
   "optional":false
  },
  {"id":"secondary_dataset",
   "help":"Optional metadata file. It can include related data from a different type of analysis that was performed on the same samples. Format must be the same as data file (Input). Column names must match column names in data file (Input) in spelling and order. [<a href='/home/doc#secondary_dataset_format' target='_blank'>File format</a>]",
   "type":"file"
  }
],
"Pre-processing":[
  {"id":"abundance_threshold_type",
   "type":"threshold_type",
   "default":"percent",
   "hidden_field":1
  },
  {"id":"abundance_threshold",
   "help":"Abundance threshold for filtering.",
   "type":"threshold",
   "default_type":"integer",
   "default_integer":"1",
   "default_percent":"0.03",
   "placeholder_integer":"An integer over 0",
   "placeholder_percent":"0-100"
  },
  {"id":"presence_threshold_type",
   "type":"threshold_type",
   "default":"int",
   "hidden_field":1
  },
  {"id":"presence_threshold",
   "help":"Presence (prevalence) threshold for filtering.",
   "type":"threshold",
   "default_type":"integer",
   "default_integer":"1",
   "default_percent":"10",
   "placeholder_integer":"An integer over 0",
   "placeholder_percent":"0-100"
  },
  {"id":"bin_levels",
   "label":"Category binning levels",
   "help":"Chose the category level(s) at which the data will be binned.",
   "type":"select",
   "placeholder":"Select Primary dataset first",
   "multiple":true
  },
  {"id":"bin_fun",
   "label":"Category binning function",
   "help":"Function to apply for category binning.",
   "type":"select",
   "increment":"3",
   "values":"binning",
   "default":"sum"
  }
],
"Transformations":[
  {"id":"prim_rarefaction",
   "label":"Rarefaction (Primary dataset)",
   "help":"Perform a rarefaction (sub-sampling) step (random drawings without replacement).",
   "type":"check_box",
   "db_field":"prim_rarefaction",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"prim_sampling_depth",
   "label":"Sampling depth",
   "help":"Number of elements (counts) to draw in each sample. Must be a positive integer. The value cannot exceed the minimum count per sample in the data set (it will be set automatically if needed).",
   "belongs_to":"prim_rarefaction",
   "type":"integer",
   "default":"500000",
   "placeholder":">0"
  },
  {"id":"prim_nsampling",
   "label":"N samplings",
   "help":"Number of repeated rarefactions to perform (the result will be the average across repeated rarefactions).",
   "belongs_to":"prim_rarefaction",
   "type":"integer",
   "default":"1",
   "placeholder":">0"
  },
  {"id":"prim_trans_method",
   "label":"Transformation (Primary dataset)",
   "help":"Choose a data transformation method.",
   "type":"select",
   "values":"transformation",
   "default":"none"
  },
  {"id":"prim_batch_effect_suppression",
   "scope":"cli_only",
   "label":"Batch effect suppression (Primary dataset)",
   "help":"Batch effect(s) can be suppressed to facilitate statistical tests. Example: In an experiment where 20 samples from experimental group A and 20 samples from experimental group B where distributed into two batches for processing,the batch-effect can be supressed. Make sure it is consitent with Model,in the Experimental design section.",
   "placeholder":"Select Map first",
   "type":"select"
  },
  {"id":"prim_batch_effect_suppression_fun",
   "scope":"cli_only",
   "label":"Batch effect suppression method (Primary dataset)",
   "help":"Method to apply to suppress batch-effect in primary dataset.",
   "type":"select",
   "values":"batch_effect",
   "increment":"3",
   "default":"none"
  },
  {"id":"sec_rarefaction",
   "label":"Rarefaction (Secondary dataset)",
   "help":"Perform a rarefaction (sub-sampling) step (random drawings without replacement).",
   "type":"check_box",
   "db_field":"sec_rarefaction",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"sec_sampling_depth",
   "label":"Sampling depth",
   "help":"Number of elements (counts) to draw in each sample. Must be a positive integer. The value cannot exceed the minimum count per sample in the data set (it will be set automatically if needed).",
   "belongs_to":"sec_rarefaction",
   "type":"integer",
   "default":"500000",
   "placeholder":">0"
  },
  {"id":"sec_nsampling",
   "label":"N samplings",
   "help":"Number of repeated rarefactions to perform (the result will be the average across repeated rarefactions).",
   "belongs_to":"sec_rarefaction",
   "type":"integer",
   "default":"1",
   "placeholder":">0"
  },
  {"id":"sec_trans_method",
   "label":"Transformation (Secondary dataset)",
   "help":"Choose a data transformation method.",
   "type":"select",
   "values":"transformation",
   "default":"none"
  },
  {"id":"sec_batch_effect_suppression",
   "scope":"cli_only",
   "label":"Batch effect suppression (Secondary dataset)",
   "help":"Batch effect(s) can be suppressed to facilitate statistical tests. Example: In an experiment where 20 samples from experimental group A and 20 samples from experimental group B where distributed into two batches for processing,the batch-effect can be supressed. Make sure it is consitent with Model,in the Experimental design section.",
   "placeholder":"Select Map first",
   "type":"select"
  },
  {"id":"sec_batch_effect_suppression_fun",
   "scope":"cli_only",
   "label":"Batch effect suppression method (Secondary dataset)",
   "help":"Method to apply to suppress batch-effect in secondary dataset.",
   "type":"select",
   "increment":"3",
   "values":"batch_effect",
   "default":"none"
  }
],
"Analysis":[
  {"id":"model_type",
   "label":"Experimental design",
   "help":"Choose a basic or advanced model.",
   "type":"model_type",
   "default":"basic"
  },
  {"id":"basic_model",
   "label":"Model",
   "help":"Define which groups should be compared. Mith the basic model option, an Anova is used to compare groups by default.",
   "type":"select",
   "placeholder":"Select Map first",
   "belongs_to":"model_type_basic"
  },
  {"id":"advanced_stats",
   "label":"Statistics",
   "help":"Define which groups should be compared and the statistics to use. Make sure that the syntax of the Model formula fits the statistics requirements (See Doc for help).",
   "type":"select",
   "belongs_to":"model_type_advanced",
   "values":"statistics",
   "default":"anova"
  },
  {"id":"advanced_model",
   "label":"Model",
   "help":"This will define the statistical model to use for the analysis. It should be a formula with terms refering to columns in the mapping file. Simple example: In an experiment where column A defines the subjects genders and column B defines subjects diets,a model testing both the effect of gender and diet and their interactions could be writen A*B. Example with nested variables: In an experiment where column A defines individuals and column B defines replicated sampling within each individuals,a model testing the effect of B could be writen A/B. See Doc for help.",
   "type":"text",
   "placeholder":"ex:ExperimentalGroup*Gender",
   "belongs_to":"model_type_advanced"
  },
  {"id":"proportions",
   "scope":"form_only",
   "label":"Proportions",
   "help":"Display proportions in a stacked bar-chart.",
   "type":"check_box",
   "db_field":"analysis",
   "default":true
  },
  {"id":"diversity",
   "scope":"form_only",
   "help":"This will assess the diversity within each sample. It will generate rarefaction curves for each selected diversity metric that will allow you to compare diversity between samples and between the groups defined in your model.",
   "type":"check_box",
   "color":"tomato",
   "db_field":"analysis",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"diversity_metric",
   "label":"Metric",
   "belongs_to":"diversity",
   "help":"Choose the diversity metric(s) to use. Richness and Shannon deiversity index are particularly adapted to metataxonomic studies. See the Doc for help.",
   "type":"select",
   "multiple":true,
   "values":"diversity",
   "default":"richness"
  },
  {"id":"compare_diversity",
   "label":"Compare groups",
   "belongs_to":"diversity",
   "help":"Compare the diversity between experimental groups using the specified Model and statistical test?",
   "type":"bool",
   "default":false
  },
  {"id":"adonis",
   "scope":"form_only",
   "label":"perMANOVA",
   "help":"This will perform a Permutational Multivariate Analysis of Variance using a distance matrix (Adonis method). It will show how your model explains differences based on a similarity matrix that is computed using the chosen similarity metric.",
   "type":"check_box",
   "db_field":"analysis",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"adonis_distfun",
   "label":"Distance metric",
   "belongs_to":"adonis",
   "help":"Distance metric tu use. The Jaccard index and Bray-Curtis distances are particularly adapted to metataxonomic studies. See the Doc for help.",
   "type":"select",
   "multiple":false,
   "values":"distance",
   "default":"jaccard"
  },
  {"id":"adonis_model",
   "label":"Model",
   "belongs_to":"adonis",
   "help":"Model for Adonis. See the Doc for help.",
   "type":"text",
   "placeholder":"ex:ExperimentalGroup*Gender"
  },
  {"id":"adonis_strata",
   "label":"Strata",
   "belongs_to":"adonis",
   "help":"Adonis strata parameter. See the Doc for help.",
   "type":"text",
   "placeholder":"ex:Subject"
  },
  {"id":"pca",
   "scope":"form_only",
   "label":"PCA",
   "help":"Principal component analysis (PCA). A simple method of dimensionality reduction.",
   "type":"check_box",
   "db_field":"analysis",
   "default":false
  },
  {"id":"pcoa",
   "scope":"form_only",
   "label":"PCoA",
   "help":"Principal coordinate analysis (PCoA). A simple method of dimensionality reduction based on a distance matrix.",
   "type":"check_box",
   "db_field":"analysis",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"pcoa_distfun",
   "label":"Distance metric",
   "belongs_to":"pcoa",
   "help":"Distance metric to use. The Jaccard index and Bray-Curtis distances are particularly adapted to metataxonomic studies. See the Doc for help.",
   "type":"select",
   "multiple":false,
   "values":"distance",
   "default":"jaccard"
  },
  {"id":"heatmap",
   "scope":"form_only",
   "label":"Heatmap",
   "help":"Abundance heatmap.",
   "type":"check_box",
   "db_field":"analysis",
   "default":false
  },
  {"id":"change",
   "scope":"form_only",
   "label":"Changes",
   "help":"Differential analysis including fold-change and visualization with MA/volcano plots.",
   "type":"check_box",
   "db_field":"analysis",
   "default":false
  },
  {"id":"correlation_network",
   "scope":"form_only",
   "label":"Correlation network",
   "help":"Correlation network.",
   "type":"check_box",
   "db_field":"analysis",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"correlation_network_fun",
   "label":"Correlation method",
   "belongs_to":"correlation_network",
   "help":"Correlation method.",
   "type":"select",
   "values":"correlation",
   "default":"spearman"
  },
  {"id":"clustering",
   "scope":"form_only",
   "label":"Clustering",
   "help":"Perform categorical clustering on the primary dataset.",
   "type":"check_box",
   "db_field":"analysis",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"clustering_fun",
   "label":"Algorithm",
   "belongs_to":"clustering",
   "help":"Choose clustering algorithm(s).",
   "type":"select",
   "multiple":false,
   "values":"clustering",
   "default":"pam"
  },
  {"id":"similarity_network",
   "scope":"form_only",
   "label":"Similarity network",
   "help":"Similarity network, graph-based clustering and similarity network fusion (SNF).",
   "type":"check_box",
   "db_field":"analysis",
   "trigger":"drop_down",
   "default":false
  },
  {"id":"similarity_network_fun1",
   "label":"Metric for primary dataset",
   "belongs_to":"similarity_network",
   "help":"Similarity metric for primary dataset.",
   "type":"select",
   "values":"distance",
   "default":"jaccard"
  },
  {"id":"similarity_network_fun2",
   "label":"Metric for secondary dataset",
   "belongs_to":"similarity_network",
   "help":"Similarity metric for secondary dataset.",
   "type":"select",
   "values":"distance",
   "default":"manhattan"
  },
  {"id":"similarity_network_clust",
   "label":"Clustering algorithm",
   "belongs_to":"similarity_network",
   "help":"Graph-based clustering algorithm.",
   "type":"select",
   "values":"graph_clustering",
   "default":"walktrap"
  }
]
}
}
